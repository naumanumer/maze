import{_ as e,S as t}from"./main.es.js";var i=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.total))},e}(),l=function(t){function i(e,i){var l=t.call(this,e)||this;return l.total=i,l.count=0,l}return e(i,t),i.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},i}(t),n=["animate","animateMotion","animateTransform","circle","clipPath","color-profile","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","hatch","hatchpath","image","line","linearGradient","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","solidColor","stop","style","svg","switch","symbol","text","textPath","tspan","unknown","use","view"];function s(e,t){if("string"==typeof t||"number"==typeof t)e.innerHTML+=t.toString();else if(t instanceof Node)e.appendChild(t);else if(Array.isArray(t))for(const i of t)s(e,i)}function r(e,t,...i){let l;if(l=n.includes(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e),t)for(const e of Object.keys(t))"boolean"!=typeof t[e]?l.setAttribute(e,t[e]):t[e]&&l.setAttribute(e,"");for(const e of i)s(l,e);return l}export default class{constructor(){this.cellSize=30,this.lineWidth=2,this.playerPadding=7,document.documentElement.style.setProperty("--cell-size",this.cellSize+"px")}render(e,t){const l=this.cellSize*(e.size.width+2)+this.lineWidth,n=this.cellSize*(e.size.height+2)+this.lineWidth,s=this.renderPlayer();var o;t.pipe((o=1,function(e){return e.lift(new i(o))})).subscribe((({position:e})=>{const[t,i]=[e.x,e.y].map((e=>this.cellSize*e+this.playerPadding+this.cellSize));s.setAttribute("x",t+""),s.setAttribute("y",i+"")}));let a=e.cells.map((t=>this.renderCell(t,e.size))).join("");return r("svg",{stroke:"currentColor",fill:"none",width:l,height:n,viewBox:`0 0 ${l} ${n}`},s,r("path",{d:a,class:"maze-wall","stroke-width":this.lineWidth,"stroke-linecap":"round"}))}renderPlayer(){const e=this.cellSize-2*this.playerPadding;return r("rect",{width:e,height:e,fill:"currentColor",class:"text-blue-500","stroke-width":"0",rx:"3",id:"player",x:1+this.playerPadding+this.cellSize,y:1+this.playerPadding+this.cellSize})}renderCell(e,t){const i=e.position.x*this.cellSize+this.lineWidth/2+this.cellSize,l=e.position.y*this.cellSize+this.lineWidth/2+this.cellSize;let n="";return e.hasWall("up")&&(n+=`M${i},${l}H${i+this.cellSize}`),e.hasWall("left")&&(n+=`M${i},${l}V${l+this.cellSize}`),e.position.x+1===t.width&&e.hasWall("right")&&(n+=`M${i+this.cellSize},${l}V${l+this.cellSize}`),e.position.y+1===t.height&&(n+=`M${i},${l+this.cellSize}H${i+this.cellSize}`),n}}
//# sourceMappingURL=rectangularSvg.es.js.map
