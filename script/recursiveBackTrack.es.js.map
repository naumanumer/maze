{"version":3,"file":"recursiveBackTrack.es.js","sources":["../../src/generators/recursiveBackTrack.ts"],"sourcesContent":["import {Board, Cell, RectangularDirection} from '../board';\nimport {IGenerator} from \"./types\";\n\n/**\n * Depth first recursive backtrack maze generation algorithm\n * https://weblog.jamisbuck.org/2010/12/27/maze-generation-recursive-backtracking\n *\n * Generates long dead ends making the solution little difficult\n */\nexport default class RecursiveBacktrack implements IGenerator {\n  generate(board: Board): Board {\n    board = board.clone();\n    const visitedCells = new Map();\n    const randomCell = board.getRandomCell();\n    board.cells[0].removeWall(RectangularDirection.LEFT);\n    board.cells[board.cells.length - 1].removeWall(RectangularDirection.RIGHT);\n\n    this.visitCell(randomCell, visitedCells, board);\n    return board;\n  }\n\n  visitCell(cell: Cell, visitedCells: Map<string, Cell>, board: Board) {\n    visitedCells.set(cell.position.stringify(), cell);\n    const cells = Array.from(board.getNeighbourCells(cell.position).values());\n\n    while (cells.length !== 0) {\n      const i = Math.round(Math.random() * (cells.length - 1));\n      const randomCell = cells[i];\n\n      if (!visitedCells.has(randomCell.position.stringify())) {\n        board.removeInterWall(cell.position, randomCell.position);\n        this.visitCell(randomCell, visitedCells, board);\n      }\n\n      cells.splice(i, 1);\n    }\n  }\n}\n"],"names":[],"mappings":"AAGA;;;;;;MAMqB,kBAAkB;IACrC,QAAQ,CAAC,KAAY;QACnB,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;QACtB,MAAM,YAAY,GAAG,IAAI,GAAG,EAAE,CAAC;QAC/B,MAAM,UAAU,GAAG,KAAK,CAAC,aAAa,EAAE,CAAC;QACzC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,mBAA2B,CAAC;QACrD,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,UAAU,qBAA4B,CAAC;QAE3E,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;QAChD,OAAO,KAAK,CAAC;KACd;IAED,SAAS,CAAC,IAAU,EAAE,YAA+B,EAAE,KAAY;QACjE,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,CAAC;QAClD,MAAM,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;QAE1E,OAAO,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YACzB,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACzD,MAAM,UAAU,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YAE5B,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,EAAE;gBACtD,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,QAAQ,CAAC,CAAC;gBAC1D,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;aACjD;YAED,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACpB;KACF;;;;;"}